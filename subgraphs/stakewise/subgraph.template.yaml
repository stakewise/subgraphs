specVersion: 0.0.3
description: The StakeWise ETH2 liquid staking protocol
repository: https://github.com/stakewise/subgraphs/subgraphs/stakewise
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: Pool
    network: {{ network }}
    source:
      address: '{{ pool.address }}'
      abi: Pool
      startBlock: {{ pool.startBlock }}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/mappings/pool.ts
      entities:
        - Pool
        - Settings
        - DepositActivation
        - Operator
        - Validator
      abis:
        - name: Pool
          file: ./packages/abis/Pool.json
      eventHandlers:
        - event: MinActivatingDepositUpdated(uint256,address)
          handler: handleMinActivatingDepositUpdated
        - event: PendingValidatorsLimitUpdated(uint256,address)
          handler: handlePendingValidatorsLimitUpdated
        - event: ActivatedValidatorsUpdated(uint256,address)
          handler: handleActivatedValidatorsUpdated
        - event: Paused(address)
          handler: handlePaused
        - event: Unpaused(address)
          handler: handleUnpaused
        - event: ActivationScheduled(indexed address,uint256,uint256)
          handler: handleActivationScheduled
        - event: Activated(indexed address,uint256,uint256,indexed address)
          handler: handleActivated
        - event: ValidatorInitialized(bytes,address)
          handler: handleValidatorInitialized
        - event: ValidatorRegistered(bytes,address)
          handler: handleValidatorRegistered

  - kind: ethereum/contract
    name: PoolValidators
    network: {{ network }}
    source:
      address: '{{ poolValidators.address }}'
      abi: PoolValidators
      startBlock: {{ poolValidators.startBlock }}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/mappings/poolValidators.ts
      entities:
        - Operator
        - Validator
        - Settings
      abis:
        - name: PoolValidators
          file: ./packages/abis/PoolValidators.json
      eventHandlers:
        - event: OperatorAdded(indexed address,indexed bytes32,string,indexed bytes32,string)
          handler: handleOperatorAdded
        - event: OperatorRemoved(indexed address,indexed address)
          handler: handleOperatorRemoved
        - event: OperatorSlashed(indexed address,indexed bytes,uint256)
          handler: handleOperatorSlashed
        - event: CollateralDeposited(indexed address,uint256)
          handler: handleCollateralDeposited
        - event: CollateralWithdrawn(indexed address,indexed address,uint256)
          handler: handleCollateralWithdrawn
        - event: Paused(address)
          handler: handlePaused
        - event: Unpaused(address)
          handler: handleUnpaused

  - kind: ethereum/contract
    name: MerkleDistributor
    network: {{ network }}
    source:
      address: '{{ merkleDistributor.address }}'
      abi: MerkleDistributor
      startBlock: {{ merkleDistributor.startBlock }}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/mappings/merkleDistributor.ts
      entities:
        - MerkleDistributor
        - MerkleDistributorClaim
        - TokenDistribution
        - Settings
      abis:
        - name: MerkleDistributor
          file: ./packages/abis/MerkleDistributor.json
      eventHandlers:
        - event: MerkleRootUpdated(indexed address,indexed bytes32,string)
          handler: handleMerkleRootUpdated
        - event: DistributionAdded(indexed address,indexed address,indexed address,uint256,uint256,uint256)
          handler: handleDistributionAdded
        - event: Claimed(indexed address,uint256,address[],uint256[])
          handler: handleClaimed
        - event: Paused(address)
          handler: handlePaused
        - event: Unpaused(address)
          handler: handleUnpaused

  - kind: ethereum/contract
    name: Oracles
    network: {{ network }}
    source:
      address: '{{ oracles.address }}'
      abi: Oracles
      startBlock: {{ oracles.startBlock }}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/mappings/oracles.ts
      entities:
        - Oracle
        - Settings
      abis:
        - name: Oracles
          file: ./packages/abis/Oracles.json
      eventHandlers:
        - event: OracleAdded(indexed address,string)
          handler: handleOracleAdded
        - event: OracleRemoved(indexed address)
          handler: handleOracleRemoved
        - event: Paused(address)
          handler: handlePaused
        - event: Unpaused(address)
          handler: handleUnpaused

  - kind: ethereum/contract
    name: VestingEscrowFactory
    network: {{ network }}
    source:
      address: '{{ vestingEscrowFactory.address }}'
      abi: VestingEscrowFactory
      startBlock: {{ vestingEscrowFactory.startBlock }}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/mappings/vestingEscrowFactory.ts
      entities:
        - VestingEscrow
        - Settings
      abis:
        - name: VestingEscrowFactory
          file: ./packages/abis/VestingEscrowFactory.json
      eventHandlers:
        - event: VestingEscrowCreated(indexed address,indexed address,indexed address,address,address,uint256,uint256,uint256,uint256)
          handler: handleVestingEscrowCreated
        - event: Paused(address)
          handler: handlePaused
        - event: Unpaused(address)
          handler: handleUnpaused

  - kind: ethereum/contract
    name: OperatorsRevenueSharing
    network: {{ network }}
    source:
      address: '{{ operatorsRevenueSharing.address }}'
      abi: RevenueSharing
      startBlock: {{ operatorsRevenueSharing.startBlock }}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/mappings/operatorsRevenueSharing.ts
      entities:
        - OperatorsRevenueSharing
        - OperatorRevenueSharingAccount
        - Settings
      abis:
        - name: RevenueSharing
          file: ./packages/abis/RevenueSharing.json
      eventHandlers:
        - event: RewardsUpdated(indexed address,uint256,uint256)
          handler: handleRewardsUpdated
        - event: AccountAdded(indexed address,indexed uint128)
          handler: handleAccountAdded
        - event: AccountRemoved(indexed address,uint256)
          handler: handleAccountRemoved
        - event: AmountIncreased(indexed address,uint256,uint256)
          handler: handleAmountIncreased
        - event: RevenueShareUpdated(indexed address,indexed uint256,uint256)
          handler: handleRevenueShareUpdated
        - event: RewardCollected(indexed address,indexed address,uint256)
          handler: handleRewardCollected
        - event: Paused(address)
          handler: handlePaused
        - event: Unpaused(address)
          handler: handleUnpaused
templates:
  - kind: ethereum/contract
    name: VestingEscrow
    network: {{ network }}
    source:
      abi: VestingEscrow
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/mappings/vestingEscrow.ts
      entities:
        - VestingEscrow
      abis:
        - name: VestingEscrow
          file: ./packages/abis/VestingEscrow.json
      eventHandlers:
        - event: Stopped(indexed address,indexed address,uint256)
          handler: handleStopped
        - event: Claimed(indexed address,indexed address,uint256)
          handler: handleClaimed
        - event: Paused(address)
          handler: handlePaused
        - event: Unpaused(address)
          handler: handleUnpaused
